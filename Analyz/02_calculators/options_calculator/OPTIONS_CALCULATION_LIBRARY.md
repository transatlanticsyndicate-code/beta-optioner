# –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤ –æ–ø—Ü–∏–æ–Ω–æ–≤ - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–î–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 2025-11-18  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä:** –ò–ò-–∞–Ω–∞–ª–∏—Ç–∏–∫

---

## üéØ –û–±–∑–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–æ–≤ –æ–ø—Ü–∏–æ–Ω–æ–≤, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –æ–ø—Ü–∏–æ–Ω–æ–≤, —Ä–∞—Å—á–µ—Ç–æ–≤ P&L, –≥—Ä–µ–∫–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–æ–≤ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏  
**–Ø–∑—ã–∫–∏:** JavaScript (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥), Python (–±—ç–∫–µ–Ω–¥)  
**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** Plotly.js –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, FastAPI –¥–ª—è API

---

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üîπ 1. –§—Ä–æ–Ω—Ç–µ–Ω–¥: `optionPricing.js` - –Ø–¥—Ä–æ —Ä–∞—Å—á–µ—Ç–æ–≤

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `frontend/src/utils/optionPricing.js`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏ P&L —Ä–∞—Å—á–µ—Ç–æ–≤

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

**`calculateIntrinsicValue(option, price)`**
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –æ–ø—Ü–∏–æ–Ω–∞
- **CALL:** `max(0, price - strike)`
- **PUT:** `max(0, strike - price)`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –ß–∏—Å–ª–æ (–¥–æ–ª–ª–∞—Ä—ã)

**`calculateOptionValueWithTimeDecay(option, price, currentPrice, daysRemaining)`**
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –æ–ø—Ü–∏–æ–Ω–∞ —Å —É—á–µ—Ç–æ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å–ø–∞–¥–∞
- **–§–æ—Ä–º—É–ª–∞:** `intrinsic + premium √ó ‚àö(days/365) √ó exp(-moneyness √ó 2)`
- **Moneyness:** `|price - strike| / max(price, strike)`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –ß–∏—Å–ª–æ (–¥–æ–ª–ª–∞—Ä—ã)

**`calculateOptionPLValue(option, price, currentPrice, daysRemaining)`**
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç P&L –æ–ø—Ü–∏–æ–Ω–∞ –ø—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–π —Ü–µ–Ω–µ
- **Buy:** `(optionValue - premium) √ó quantity √ó multiplier`
- **Sell:** `(premium - optionValue) √ó quantity √ó multiplier`
- **Multiplier:** 100 (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –ß–∏—Å–ª–æ (–¥–æ–ª–ª–∞—Ä—ã)

**`calculateOptionExpirationPLValue(option, price)`**
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç P&L –æ–ø—Ü–∏–æ–Ω–∞ –Ω–∞ –¥–∞—Ç—É —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ intrinsic value (time value = 0)
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –ß–∏—Å–ª–æ (–¥–æ–ª–ª–∞—Ä—ã)

#### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
- `OPTION_CONTRACT_MULTIPLIER = 100` - –º–Ω–æ–∂–∏—Ç–µ–ª—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

---

### üîπ 2. –§—Ä–æ–Ω—Ç–µ–Ω–¥: `metricsCalculator.js` - –ú–µ—Ç—Ä–∏–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `frontend/src/utils/metricsCalculator.js`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ —Ä–∏—Å–∫–∞ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

**`calculatePLMetrics(options, currentPrice, positions, daysRemaining)`**
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- **MAX –ø—Ä–∏–±—ã–ª—å:** –ú–∞–∫—Å–∏–º—É–º –∏–∑ –º–∞—Å—Å–∏–≤–∞ P&L –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É ¬±50%
- **MAX —É–±—ã—Ç–æ–∫:** –ú–∏–Ω–∏–º—É–º –∏–∑ –º–∞—Å—Å–∏–≤–∞ P&L
- **Break-even:** –¢–æ—á–∫–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è P&L —Å –Ω—É–ª–µ–º
- **Risk/Reward:** –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫

**`calculateTotalPremium(options)`**
- –°—É–º–º–∏—Ä—É–µ—Ç –ø—Ä–µ–º–∏–∏ –≤—Å–µ—Ö –æ–ø—Ü–∏–æ–Ω–æ–≤ —Å —É—á–µ—Ç–æ–º Buy/Sell
- **Buy:** –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–µ–º–∏—è (–¥–µ–±–µ—Ç)
- **Sell:** –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–µ–º–∏—è (–∫—Ä–µ–¥–∏—Ç)

**`calculateRequiredCapital(options, currentPrice, positions)`**
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –∫–∞–ø–∏—Ç–∞–ª –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π –±–∞–∑–æ–≤–æ–≥–æ –∞–∫—Ç–∏–≤–∞
- **Reg T –ø—Ä–∞–≤–∏–ª–∞:** 20% –æ—Ç —Ü–µ–Ω—ã + –ø—Ä–µ–º–∏—è –¥–ª—è naked –æ–ø—Ü–∏–æ–Ω–æ–≤
- **Covered:** –ú–∏–Ω–∏–º—É–º –º–µ–∂–¥—É –ø—Ä–µ–º–∏–µ–π –∏ 10% –æ—Ç –ø—Ä–∏–±—ã–ª–∏

**`hasUnlimitedProfit(options, positions)` / `hasUnlimitedLoss(options, positions)`**
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–∞
- **–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å:** –¢–æ–ª—å–∫–æ LONG CALL –∏–ª–∏ SHORT PUT
- **–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —É–±—ã—Ç–æ–∫:** –¢–æ–ª—å–∫–æ SHORT CALL –∏–ª–∏ LONG PUT

#### –ì—Ä–µ–∫–∏:
**`calculateTotalGreeks(options)`**
- –°—É–º–º–∏—Ä—É–µ—Ç –≥—Ä–µ–∫–∏ –ø–æ –ø–æ—Ä—Ç—Ñ–µ–ª—é
- **Delta:** –°—É–º–º–∞—Ä–Ω–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ —Ü–µ–Ω–µ –∞–∫—Ç–∏–≤–∞
- **Gamma:** –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–ª—å—Ç—ã –∫ —Ü–µ–Ω–µ
- **Theta:** –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ä–∞—Å–ø–∞–¥ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- **Vega:** –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏

---

### üîπ 3. –§—Ä–æ–Ω—Ç–µ–Ω–¥: `PLChart.jsx` - –ì—Ä–∞—Ñ–∏–∫ P&L

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `frontend/src/components/CalculatorV2/PLChart.jsx`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è —Ä–∏—Å–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

**`calculatePLDataForMetrics()`**
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç P&L –¥–∞–Ω–Ω—ã–µ –¥–ª—è –º–µ—Ç—Ä–∏–∫
- –°–æ–∑–¥–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑ 500 —Ç–æ—á–µ–∫ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É ¬±50% –æ—Ç —Ü–µ–Ω—ã
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω—ã –∏ –ø–æ–∑–∏—Ü–∏–∏ –±–∞–∑–æ–≤–æ–≥–æ –∞–∫—Ç–∏–≤–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `{prices, totalPLArray}`

#### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞:
1. **–û–ø—Ü–∏–æ–Ω—ã:** –î–ª—è –∫–∞–∂–¥–æ–π —Ü–µ–Ω—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –æ–ø—Ü–∏–æ–Ω–∞
2. **–ü–æ–∑–∏—Ü–∏–∏:** P&L = (—Ü–µ–Ω–∞ - –≤—Ö–æ–¥) √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ √ó (LONG=1, SHORT=-1)
3. **Total P&L:** –°—É–º–º–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. **–ó–æ–Ω—ã –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏:** –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (1œÉ=68%, 2œÉ=95%, 3œÉ=99.7%)

#### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:
- **–õ–∏–Ω–∏–∏:** –û–ø—Ü–∏–æ–Ω—ã (—Å–ø–ª–æ—à–Ω—ã–µ), –ø–æ–∑–∏—Ü–∏–∏ (–ø—É–Ω–∫—Ç–∏—Ä–Ω—ã–µ), Total P&L (—Ç–æ–ª—Å—Ç–∞—è)
- **–ó–∞–ª–∏–≤–∫–∞:** –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –ø—Ä–∏–±—ã–ª–∏, –∫—Ä–∞—Å–Ω—ã–π –¥–ª—è —É–±—ã—Ç–∫–∞
- **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏:** –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞, break-even —Ç–æ—á–∫–∏
- **Annotations:** –ú–µ—Ç–∫–∏ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏ (POP)

---

### üîπ 4. –§—Ä–æ–Ω—Ç–µ–Ω–¥: `usePositionExitCalculator.js` - –°—Ü–µ–Ω–∞—Ä–∏–∏ –≤—ã—Ö–æ–¥–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `frontend/src/hooks/usePositionExitCalculator.js`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞—Å—á–µ—Ç P&L –ø—Ä–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏

#### –°—Ü–µ–Ω–∞—Ä–∏–∏ –≤—ã—Ö–æ–¥–∞:

**`calculateExerciseScenario()` - –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø—Ü–∏–æ–Ω–æ–≤**
- **Buy CALL:** –ü–æ–∫—É–ø–∞–µ–º –∞–∫—Ü–∏–∏ –ø–æ —Å—Ç—Ä–∞–π–∫—É
- **Sell CALL:** –ü—Ä–æ–¥–∞–µ–º –∞–∫—Ü–∏–∏ –ø–æ —Å—Ç—Ä–∞–π–∫—É
- **Buy PUT:** –ü—Ä–æ–¥–∞–µ–º –∞–∫—Ü–∏–∏ –ø–æ —Å—Ç—Ä–∞–π–∫—É
- **Sell PUT:** –ü–æ–∫—É–ø–∞–µ–º –∞–∫—Ü–∏–∏ –ø–æ —Å—Ç—Ä–∞–π–∫—É
- –ó–∞—Ç–µ–º —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è P&L –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã –∞–∫—Ü–∏–π

**`calculateCloseOptionsScenario()` - –ó–∞–∫—Ä—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ü–∏–æ–Ω—ã**
- –û–ø—Ü–∏–æ–Ω—ã –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ —Ç–µ–∫—É—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- –ü–æ–∑–∏—Ü–∏–∏ –±–∞–∑–æ–≤–æ–≥–æ –∞–∫—Ç–∏–≤–∞ –æ—Å—Ç–∞—é—Ç—Å—è
- P&L –æ—Ç –æ–ø—Ü–∏–æ–Ω–æ–≤ + —Å—Ç–æ–∏–º–æ—Å—Ç—å —É–¥–µ—Ä–∂–∞–Ω–∏—è –∞–∫—Ü–∏–π

**`calculateCloseAllScenario()` - –ó–∞–∫—Ä—ã—Ç—å –≤—Å—ë**
- –í—Å–µ –æ–ø—Ü–∏–æ–Ω—ã –∏ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è
- –ü–æ–ª–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤–æ–≥–æ P&L

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞—Å–ø–∞–¥ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –æ–ø—Ü–∏–æ–Ω–æ–≤
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å —É–¥–µ—Ä–∂–∞–Ω–∏—è –∞–∫—Ü–∏–π
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Ä–∞–∑–±–∏–≤–∫—É –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

---

### üîπ 5. –§—Ä–æ–Ω—Ç–µ–Ω–¥: `ExitTimeDecayChart.jsx` - –ì—Ä–∞—Ñ–∏–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å–ø–∞–¥–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `frontend/src/components/CalculatorV2/ExitTimeDecayChart.jsx`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è P&L –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- **–û—Å–∏:** X=–î–Ω–∏ –¥–æ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏, Y=P&L
- **–õ–∏–Ω–∏–∏:** Underlying, Buy/Sell CALL/PUT, Total P&L
- **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è:** –¢–µ–∫—É—â–∏–π –¥–µ–Ω—å (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å –±–µ–≥—É–Ω–∫–æ–º)
- **–†–∞—Å—á–µ—Ç:** –£—á–µ—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ñ–æ—Ä–º—É–ª–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å–ø–∞–¥–∞

---

### üîπ 6. –§—Ä–æ–Ω—Ç–µ–Ω–¥: `Surface3D.jsx` - 3D –≥—Ä–∞—Ñ–∏–∫

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `frontend/src/components/CalculatorV2/Surface3D.jsx`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢—Ä–µ—Ö–º–µ—Ä–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è P&L –æ—Ç —Ü–µ–Ω—ã –∏ –≤—Ä–µ–º–µ–Ω–∏

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- **–û—Å–∏:** X=–¶–µ–Ω–∞ –∞–∫—Ç–∏–≤–∞, Y=–î–Ω–∏ –¥–æ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏, Z=P&L
- **–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å:** –¶–≤–µ—Ç–æ–≤–∞—è —à–∫–∞–ª–∞ (–∫—Ä–∞—Å–Ω—ã–π‚Üí—Å–µ—Ä—ã–π‚Üí–∑–µ–ª–µ–Ω—ã–π)
- **–†–∞—Å—á–µ—Ç:** –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å–ø–∞–¥–∞
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤:** –í—Ä–∞—â–µ–Ω–∏–µ, –∑—É–º, hover

---

### üîπ 7. –ë—ç–∫–µ–Ω–¥: `calculations.py` - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/app/services/calculations.py`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –º–µ—Ç—Ä–∏–∫ —Ä—ã–Ω–∫–∞ –æ–ø—Ü–∏–æ–Ω–æ–≤

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

**`calculate_max_pain(options_data)`**
- –ù–∞—Ö–æ–¥–∏—Ç —Ü–µ–Ω—É —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Å–æ–≤–æ–∫—É–ø–Ω—ã–º —É–±—ã—Ç–∫–æ–º –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –æ–ø—Ü–∏–æ–Ω–æ–≤
- **–§–æ—Ä–º—É–ª–∞:** –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç—Ä–∞–π–∫–∞ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è OI √ó intrinsic_value
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –°—Ç—Ä–∞–π–∫ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π "–±–æ–ª—å—é"

**`calculate_put_call_ratio(options_data)`**
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ PUT/CALL –ø–æ –æ–±—ä–µ–º—É –∏ OI
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** P/C ratio –ø–æ volume –∏ open interest

---

### üîπ 8. –ë—ç–∫–µ–Ω–¥: `iv_rank_calculator.py` - IV Rank

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/app/services/iv_rank_calculator.py`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- **IV Rank:** –ü—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å —Ç–µ–∫—É—â–µ–π IV –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ 52 –Ω–µ–¥–µ–ª—å
- **–§–æ—Ä–º—É–ª–∞:** `(–¢–µ–∫—É—â–∞—è IV - Min IV) / (Max IV - Min IV) √ó 100`
- **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:** 365 –¥–Ω–µ–π –∏–∑ Polygon API
- **–ú–µ—Ç—Ä–∏–∫–∏:** Min/Max/Avg IV –∑–∞ –ø–µ—Ä–∏–æ–¥, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ú–æ–¥–µ–ª–∏ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:

#### –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å–ø–∞–¥–∞:
```javascript
timeValue = premium √ó ‚àö(days/365) √ó exp(-moneyness √ó 2)
```
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –ë—ã—Å—Ç—Ä—ã–π —Ä–∞—Å—á–µ—Ç, –ø–æ–Ω—è—Ç–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∏–≤–∏–¥–µ–Ω–¥—ã, –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∞–≤–∫–∏

#### –ú–æ–¥–µ–ª—å —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏:
```javascript
optionValue = intrinsicValue  // timeValue = 0
```

### –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ –∏ –µ–¥–∏–Ω–∏—Ü—ã:
- **–û–ø—Ü–∏–æ–Ω—ã:** 100 –∞–∫—Ü–∏–π –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç
- **–ê–∫—Ü–∏–∏:** –®—Ç—É–∫–∏ (–±–µ–∑ —É–º–Ω–æ–∂–µ–Ω–∏—è)
- **P&L:** –î–æ–ª–ª–∞—Ä—ã (—Å –∫–æ–ø–µ–π–∫–∞–º–∏)

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **TTL –∫—ç—à:** –î–∞—Ç—ã —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏ (5-1440 –º–∏–Ω—É—Ç)
- **–õ–∏–º–∏—Ç—ã:** 1000 –æ–ø—Ü–∏–æ–Ω–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, 5000 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –º–∞–∫—Å–∏–º—É–º
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤ –≤ React hooks

---

## üìä –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–æ–≤

### P&L –æ–ø—Ü–∏–æ–Ω–∞:
```
Buy:  (–°—Ç–æ–∏–º–æ—Å—Ç—å_–æ–ø—Ü–∏–æ–Ω–∞ - –ü—Ä–µ–º–∏—è) √ó –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ √ó 100
Sell: (–ü—Ä–µ–º–∏—è - –°—Ç–æ–∏–º–æ—Å—Ç—å_–æ–ø—Ü–∏–æ–Ω–∞) √ó –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ √ó 100
```

### –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–ø—Ü–∏–æ–Ω–∞:
```
–í –¥–µ–Ω—å–≥–∞—Ö: –°—Ç–æ–∏–º–æ—Å—Ç—å = Intrinsic + Time_Value
–ù–µ –≤ –¥–µ–Ω—å–≥–∞—Ö: –°—Ç–æ–∏–º–æ—Å—Ç—å = Time_Value
```

### Break-even —Ç–æ—á–∫–∏:
```
–ù–∞–π—Ç–∏ —Ü–µ–Ω—ã –≥–¥–µ Total_P&L = 0 (–±–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫)
```

### Risk/Reward:
```
Ratio = Max_Profit / |Max_Loss|
```

### –ì—Ä–µ–∫–∏ (Delta):
```
Total_Delta = Œ£(Delta_–æ–ø—Ü–∏–æ–Ω–∞ √ó –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ √ó –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
```

---

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —Ä–∞—Å—á–µ—Ç—ã:
- `OptionsCalculatorBasic.jsx` - –û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
- `PLChart.jsx` - –ì—Ä–∞—Ñ–∏–∫ P&L
- `OptionsBoard.jsx` - –î–æ—Å–∫–∞ –æ–ø—Ü–∏–æ–Ω–æ–≤
- `MetricsDisplay.jsx` - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- `ExitCalculator.jsx` - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤—ã—Ö–æ–¥–∞

### Props –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
```javascript
{
  options: Array,      // –ú–∞—Å—Å–∏–≤ –æ–ø—Ü–∏–æ–Ω–æ–≤
  currentPrice: Number, // –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –∞–∫—Ç–∏–≤–∞
  positions: Array,     // –ü–æ–∑–∏—Ü–∏–∏ –±–∞–∑–æ–≤–æ–≥–æ –∞–∫—Ç–∏–≤–∞
  daysRemaining: Number // –î–Ω–∏ –¥–æ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏
}
```

### State —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- useMemo –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç—è–∂–µ–ª—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤
- useEffect –¥–ª—è side-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage)

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –¥–æ–ø—É—â–µ–Ω–∏—è

### –£–ø—Ä–æ—â–µ–Ω–∏—è –º–æ–¥–µ–ª–∏:
1. **–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å:** –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è 25% (–Ω–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è)
2. **–î–∏–≤–∏–¥–µ–Ω–¥—ã:** –ù–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
3. **–ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∞–≤–∫–∏:** –ù–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
4. **–ë–∏–¥-–∞—Å–∫ —Å–ø—Ä–µ–¥:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
1. **–î–∏–∞–ø–∞–∑–æ–Ω —Ä–∞—Å—á–µ—Ç–æ–≤:** ¬±50% –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
2. **–¢–æ—á–Ω–æ—Å—Ç—å:** 500 —Ç–æ—á–µ–∫ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ú–∞–∫—Å–∏–º—É–º 1000 –æ–ø—Ü–∏–æ–Ω–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

## üîÑ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞—Å—á–µ—Ç–æ–≤

### –£—Ä–æ–≤–Ω–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏:
1. **–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å:** `optionPricing.js` - –±–∞–∑–æ–≤—ã–µ —Ñ–æ—Ä–º—É–ª—ã
2. **–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å:** `metricsCalculator.js` - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
3. **–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å:** React hooks - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI
4. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:** Plotly.js –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Data Flow:
```
API ‚Üí Services ‚Üí Utils ‚Üí Hooks ‚Üí Components ‚Üí Charts
```

### Error Handling:
- Graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API
- Fallback –Ω–∞ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

---

## üìã –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã:
- –§—É–Ω–∫—Ü–∏–∏ `optionPricing.js`
- –ú–µ—Ç—Ä–∏–∫–∏ `metricsCalculator.js`
- Edge cases (0 –∑–Ω–∞—á–µ–Ω–∏–π, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Ü–µ–Ω—ã)

### Integration —Ç–µ—Å—Ç—ã:
- –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: API ‚Üí –†–∞—Å—á–µ—Ç—ã ‚Üí UI
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Performance —Ç–µ—Å—Ç—ã:
- –†–∞—Å—á–µ—Ç—ã —Å 1000+ –æ–ø—Ü–∏–æ–Ω–∞–º–∏
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- –ü–∞–º—è—Ç—å –∏ CPU usage

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤ –æ–ø—Ü–∏–æ–Ω–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –æ–ø—Ü–∏–æ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö–æ—Ä–æ—à–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞, —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Å –º–µ–º–æ–∏–∑–∞—Ü–∏–µ–π
- **–¢–æ—á–Ω–æ—Å—Ç—å:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- **–ì–∏–±–∫–æ—Å—Ç—å:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:** –ë–æ–≥–∞—Ç—ã–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** Graceful error handling –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:** –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤ –∏ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏.
