# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–µ–ø–ª–æ—è

## üöÄ –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Beta

```bash
./scripts/deploy-beta.sh "–û–ø–∏—Å–∞–Ω–∏–µ –≤–∞—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π"
```

–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –ö–æ–º–º–∏—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `origin` (modular-code-methodology)
2. ‚úÖ –ü—É—à–∏—Ç –≤ `beta` (optioner-beta-deploy2)
3. ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (89.117.52.143)
4. ‚úÖ –ü–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç frontend
5. ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç nginx –∏ PM2

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- **origin** = modular-code-methodology (–æ—Å–Ω–æ–≤–Ω–æ–π)
- **beta** = optioner-beta-deploy2 (–¥–ª—è beta —Å–µ—Ä–≤–µ—Ä–∞)

### –°–µ—Ä–≤–µ—Ä—ã
- **Beta**: https://beta.optioner.online (89.117.52.143)
- **–¢–µ—Å—Ç**: https://test.optioner.online (TBD)
- **–ü—Ä–æ–¥–∞–∫—à–Ω**: https://optioner.online (TBD)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```
/var/www/beta/
‚îú‚îÄ‚îÄ backend/          (Python FastAPI, –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ PM2)
‚îú‚îÄ‚îÄ frontend/         (React)
‚îÇ   ‚îî‚îÄ‚îÄ build/        (–ø–æ–¥–∞—ë—Ç—Å—è nginx)
‚îî‚îÄ‚îÄ .git/
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑)

```bash
# 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω sshpass
brew install sshpass

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é git –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
git config --local include.path .gitconfig-local

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ remotes
git remote -v
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π
```bash
./scripts/deploy-beta.sh "–ò—Å–ø—Ä–∞–≤–ª—è—é –±–∞–≥ —Å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å—é"
```

### –° —Ç–µ–≥–æ–º –≤–µ—Ä—Å–∏–∏
```bash
./scripts/deploy-beta.sh "v1.2.3: –î–æ–±–∞–≤–ª—è—é debug-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è IV"
```

### –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –í—Ä—É—á–Ω—É—é –ø—É—à–∏–º –≤ –æ–±–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git add -A
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ"
git push origin main
git push beta main

# –ó–∞—Ç–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
sshpass -p 'Z#yyJl7e34sptFij' ssh root@89.117.52.143 \
  "cd /var/www/beta && git pull origin main && npm --prefix frontend run build && systemctl reload nginx && pm2 restart all"
```

## üêõ –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –≤–∏–¥–Ω—ã –Ω–∞ beta.optioner.online

1. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞**: Ctrl+Shift+Delete ‚Üí "–í—Å–µ –≤—Ä–µ–º—è"
2. **–ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ**: Ctrl+Shift+N
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ build –æ–±–Ω–æ–≤–ª—ë–Ω**:
   ```bash
   sshpass -p 'Z#yyJl7e34sptFij' ssh root@89.117.52.143 \
     "ls -lah /var/www/beta/frontend/build/static/js/main.*.js"
   ```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–∞—Ä–æ–ª—å SSH —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `BETA_SSH_PASSWORD`
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å:
  ```bash
  export BETA_SSH_PASSWORD="–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å"
  ./scripts/deploy-beta.sh "–û–ø–∏—Å–∞–Ω–∏–µ"
  ```

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. `docs/DEPLOYMENT_GUIDE.md`
