# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ò–ò-–º–æ–¥–µ–ª–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (IV)

## –û–±–∑–æ—Ä –∑–∞–¥–∞—á–∏
–ú—ã –æ–±—É—á–∏–ª–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç—å –Ω–∞ 21 –º–∏–ª–ª–∏–æ–Ω–µ —Å—Ç—Ä–æ–∫ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (2023-2025 –≥–≥.) –¥–ª—è 50 –Ω–∞–∏–±–æ–ª–µ–µ –ª–∏–∫–≤–∏–¥–Ω—ã—Ö –∞–∫—Ü–∏–π –°–®–ê. –ú–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º—É—é **Implied Volatility (IV)** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ü–µ–Ω–∞—Ä–∏—è –±—É–¥—É—â–µ–≥–æ (—Ü–µ–Ω–∞ –∞–∫—Ü–∏–∏ –∏ –≤—Ä–µ–º—è –¥–æ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—É –≤—ã–¥–∞–≤–∞—Ç—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—É—é —Ü–µ–Ω—É –æ–ø—Ü–∏–æ–Ω–∞ —Å —É—á–µ—Ç–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è "—É–ª—ã–±–∫–∏ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏".

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –≤ –±–ª–æ–∫–µ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å, "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∏ –º–æ–¥–µ–ª—å", –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ. –ï—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—ã–∫–ª—é—á–µ–Ω, —Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞ IV.

–í –±–ª–æ–∫–µ, –≥–¥–µ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –±–∞–∑–æ–≤–æ–≥–æ –∞–∫—Ç–∏–≤–∞, —Å–ø—Ä–∞–≤–∞ –æ—Ç —Å–ª–æ–≤ "–ë–∞–∑–æ–≤—ã–π –∞–∫—Ç–∏–≤" –≤–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–≤–µ—Å—Ç–∏ emoji üü£ –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∏ –º–æ–¥–µ–ª—å" –≤–∫–ª—é—á–µ–Ω –∏ –¥–∞–Ω–Ω–∞—è –∞–∫—Ü–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ò–ò –º–æ–¥–µ–ª—å—é. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ - –≤—ã–≤–æ–¥–∏–º ‚ö´Ô∏è

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –º–æ–¥–µ–ª–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Node.js –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Ä–∞–Ω—Ç–∞–π–º–∞ ONNX.

**–î–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –ò–ò-–∞–≥–µ–Ω—Ç–∞:**
–í—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
npm install onnxruntime-node
```

## 2. –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –º–æ–¥–µ–ª–∏
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å —Ñ–∞–π–ª –º–æ–¥–µ–ª–∏ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø–∞–ø–∫—É –¥–ª—è –º–æ–¥–µ–ª–µ–π.

*   **–§–∞–π–ª:** `options_model.onnx` (—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–∑ Google Colab).
*   **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/src/models/options_model.onnx` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ).

## 3. –ú–æ–¥—É–ª—å –ò–ò-–¥–≤–∏–∂–∫–∞ (`aiEngine.js`)
–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/utils/aiEngine.js`. –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö (scaling) –∏ –∑–∞–ø—É—Å–∫ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏.

**–í–∞–∂–Ω–æ:** –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã `X_MEAN`, `X_STD`, `Y_MEAN`, `Y_STD` ‚Äî —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ –Ω–∞—à–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è.

```javascript
const ort = require('onnxruntime-node');

// –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (StandardScaler –∏–∑ –æ–±—É—á–µ–Ω–∏—è)
const TICKERS_LIST = ['AAPL', 'ABBV', 'ABNB', 'ADBE', 'AMD', 'AMZN', 'BA', 'BAC', 'CAT', 'CMCSA', 'COP', 'COST', 'CVX', 'DIA', 'DIS', 'GE', 'GOOGL', 'GS', 'HD', 'HON', 'IWM', 'JNJ', 'JPM', 'KO', 'LLY', 'LOW', 'MA', 'META', 'MMM', 'MRK', 'MS', 'MSFT', 'NFLX', 'NVDA', 'PEP', 'PFE', 'PG', 'PM', 'QQQ', 'SLB', 'SPY', 'T', 'TGT', 'TSLA', 'UBER', 'UNH', 'V', 'VZ', 'WFC', 'WMT', 'XOM'];

const X_MEAN = [0.026034710370290055, 0.4732129489943703, 0.39012464388406426];
const X_STD = [0.28651675423875517, 0.5812719472646916, 0.12222801581754388];

const Y_MEAN = 0.3901246440083509;
const Y_STD = 0.21758850699903196;

let session = null;

/**
 * –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –≤ –ø–∞–º—è—Ç—å
 */
async function initModel() {
    if (!session) {
        try {
            // –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
            session = await ort.InferenceSession.create('./src/models/options_model.onnx');
            console.log("‚úÖ AI Model loaded");
        } catch (e) {
            console.error("‚ùå Failed to load AI model", e);
        }
    }
}

/**
 * –ü—Ä–æ–≥–Ω–æ–∑ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –ò–ò
 */
async function predictIV(ticker, type, stockPrice, strike, ttm, currentIv) {
    try {
        if (!session) await initModel();

        const tIdx = TICKERS_LIST.indexOf(ticker.toUpperCase());
        if (tIdx === -1) return currentIv; // –ï—Å–ª–∏ —Ç–∏–∫–µ—Ä–∞ –Ω–µ—Ç –≤ –±–∞–∑–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â—É—é IV

        const pIdx = (type.toLowerCase().startsWith('c')) ? 0 : 1;

        // –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Python StandardScaler)
        const moneynessLog = Math.log(stockPrice / strike);
        const rawCont = [moneynessLog, ttm, currentIv];
        const scaledCont = rawCont.map((val, i) => (val - X_MEAN[i]) / X_STD[i]);

        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ–Ω–∑–æ—Ä–æ–≤
        const inputs = {
            ticker_idx: new ort.Tensor('int64', BigInt64Array.from([BigInt(tIdx)]), [1]),
            type_idx: new ort.Tensor('int64', BigInt64Array.from([BigInt(pIdx)]), [1]),
            continuous_features: new ort.Tensor('float32', Float32Array.from(scaledCont), [1, 3])
        };

        // –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
        const output = await session.run(inputs);
        const predictedScaled = output.predicted_iv.data[0];

        // –û–±—Ä–∞—Ç–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        const finalIV = (predictedScaled * Y_STD) + Y_MEAN;

        // –û–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å –∞–¥–µ–∫–≤–∞—Ç–Ω–æ—Å—Ç–∏ (–Ω–µ –¥–∞–µ–º IV –±—ã—Ç—å –º–µ–Ω—å—à–µ 1% –∏–ª–∏ –±–æ–ª—å—à–µ 300%)
        return Math.max(0.01, Math.min(3.0, finalIV));
    } catch (e) {
        console.error("AI Inference error:", e);
        return currentIv;
    }
}

module.exports = { predictIV, initModel };
```

## 4. –õ–æ–≥–∏–∫–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
–ò–ò-–∞–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω—ã –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø–æ–∑–∏—Ü–∏–∏.

**–ê–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –ò–ò-–∞–≥–µ–Ω—Ç–∞:**
1. –ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –±—É–¥—É—â—É—é —Ü–µ–Ω—É –æ–ø—Ü–∏–æ–Ω–∞ (–∏—Å–ø–æ–ª—å–∑—É—é—â—É—é —Ñ–æ—Ä–º—É–ª—É –ë–ª—ç–∫–∞-–®–æ—É–ª–∑–∞).
2. –ü–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º—É–ª—ã –ë–ª—ç–∫–∞-–®–æ—É–ª–∑–∞ –≤—Å—Ç–∞–≤–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ `predictIV`.
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `predictedIV` –≤–º–µ—Å—Ç–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å—Ç–∞—Ä–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–µ–∑ –ò–ò –º–æ–¥–µ–ª–∏.

**–ü—Ä–∏–º–µ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞:**

```javascript
// –î–û –ò–ù–¢–ï–ì–†–ê–¶–ò–ò (–ø—Å–µ–≤–¥–æ–∫–æ–¥)
const futurePrice = blackScholes(targetStockPrice, strike, futureTTM, rate, currentIV, type);

// –ü–û–°–õ–ï –ò–ù–¢–ï–ì–†–ê–¶–ò–ò
const ai = require('./utils/aiEngine');

// ... –≤–Ω—É—Ç—Ä–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—á–µ—Ç–∞ ...
const predictedIV = await ai.predictIV(ticker, type, targetStockPrice, strike, futureTTM, currentMarketIV);
const futurePrice = blackScholes(targetStockPrice, strike, futureTTM, rate, predictedIV, type);
```

## 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏
–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–≥–æ, —á—Ç–æ –ò–ò-–∞–≥–µ–Ω—Ç –≤—Å—ë —Å–¥–µ–ª–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:
- **–ê–∫—Ü–∏—è:** AAPL
- **–¢–∏–ø:** Call
- **–¶–µ–Ω–∞ –∞–∫—Ü–∏–∏ –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏:** 200
- **–°—Ç—Ä–∞–π–∫:** 190
- **TTM:** 0.05 (–æ–∫–æ–ª–æ 18 –¥–Ω–µ–π)
- **–¢–µ–∫—É—â–∞—è IV:** 0.30 (30%)

–ï—Å–ª–∏ –º–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å IV, –æ—Ç–ª–∏—á–Ω—É—é –æ—Ç 0.30 (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –æ–Ω–∞ –µ—ë –Ω–µ–º–Ω–æ–≥–æ —Å–Ω–∏–∑–∏—Ç –∏–ª–∏ –ø–æ–≤—ã—Å–∏—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç "—É–ª—ã–±–∫–∏"), –∏ —Ü–µ–Ω–∞ –æ–ø—Ü–∏–æ–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

## 6. –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å:** –§—É–Ω–∫—Ü–∏—è `predictIV` –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤—Å—è —Ü–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `async/await`.
- **–¢–∏–∫–µ—Ä—ã:** –ú–æ–¥–µ–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 51 —Ç–∏–∫–µ—Ä (—Å–ø–∏—Å–æ–∫ `TICKERS_LIST`). –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∞–∫—Ü–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥.
- **–°–µ—Ä–≤–µ—Ä:** –¢–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `onnxruntime-node`, —Ä–∞—Å—á–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Node.js (Backend), –∞ –Ω–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å —Ç–≤–æ–µ–º—É –ò–ò-–∞–≥–µ–Ω—Ç—É:
–†–µ–∞–ª–∏–∑—É–π –ø—Ä–æ—Å—Ç—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `predictIV`:

```javascript
const tIdx = TICKERS_LIST.indexOf(ticker.toUpperCase());

if (tIdx === -1) {
    // –¢–ò–ö–ï–†–ê –ù–ï–¢ –í –°–ü–ò–°–ö–ï
    console.log(`AI does not support ${ticker}, using standard static IV.`);
    return currentMarketIv; // –ü—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç—É IV, –∫–æ—Ç–æ—Ä–∞—è —É–∂–µ –µ—Å—Ç—å –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ
} else {
    // –¢–ò–ö–ï–† –ï–°–¢–¨, –ó–ê–ü–£–°–ö–ê–ï–ú –ù–ï–ô–†–û–°–ï–¢–¨
    // ... –ª–æ–≥–∏–∫–∞ ONNX ...
}
```

**–ò—Ç–æ–≥:** –¢–≤–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **¬´–ì–∏–±—Ä–∏–¥–Ω—ã–º¬ª**. –î–ª—è —Ç–æ–ø–æ–≤—ã—Ö –∞–∫—Ü–∏–π –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–æ—Ñ—Ç —Ö–µ–¥–∂-—Ñ–æ–Ω–¥–∞, –∞ –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö ‚Äî –∫–∞–∫ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –Ω–∞–¥–µ–∂–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä. –≠—Ç–æ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å!