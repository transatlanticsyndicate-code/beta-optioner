# ğŸ—ºï¸ ĞšĞ°Ñ€Ñ‚Ğ° Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸ĞµĞ² Ğ¸ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²

## Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ½Ğ° GitHub

| ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | URL | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | Remote Ğ² Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ |
|----------|-----|-----------|---------------------------|
| **modular-code-methodology** | https://github.com/transatlanticsyndicate-code/modular-code-methodology | ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ | `origin` |
| **optioner-beta-deploy2** | https://github.com/transatlanticsyndicate-code/optioner-beta-deploy2 | Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° beta ÑĞµÑ€Ğ²ĞµÑ€ | `beta` |
| **optioner-test-deploy** | https://github.com/transatlanticsyndicate-code/optioner-test-deploy | Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° Ñ‚ĞµÑÑ‚ ÑĞµÑ€Ğ²ĞµÑ€ | `test` (Ğ½Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½) |
| **optioner-prod-deploy** | https://github.com/transatlanticsyndicate-code/optioner-prod-deploy | Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½ | `prod` (Ğ½Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½) |

## Ğ¡ĞµÑ€Ğ²ĞµÑ€Ñ‹ Ğ¸ Ğ´Ğ¾Ğ¼ĞµĞ½Ñ‹

| ĞĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ | IP | Ğ”Ğ¾Ğ¼ĞµĞ½ | ĞŸÑƒÑ‚ÑŒ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|-----------|-------|--------|------|--------|
| **Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°** | localhost | localhost:3000 | - | âœ… Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ |
| **Beta** | 89.117.52.143 | https://beta.optioner.online | /var/www/beta | âœ… ĞĞºÑ‚Ğ¸Ğ²ĞµĞ½ |
| **Ğ¢ĞµÑÑ‚** | TBD | https://test.optioner.online | TBD | â³ ĞĞµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ |
| **ĞŸÑ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½** | TBD | https://optioner.online | TBD | â³ ĞĞµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ |

## ĞŸĞ¾Ñ‚Ğ¾Ğº Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¸ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Ğ›ĞĞšĞĞ›Ğ¬ĞĞĞ¯ Ğ ĞĞ—Ğ ĞĞ‘ĞĞ¢ĞšĞ                                     â”‚
â”‚    - Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼ ĞºĞ¾Ğ´ Ğ² /Users/andres/Desktop/WINDSURF/...   â”‚
â”‚    - Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ğ½Ğ° localhost:3000 Ğ¸ localhost:8000           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ĞšĞĞœĞœĞ˜Ğ¢ Ğ˜ ĞŸĞ£Ğ¨                                             â”‚
â”‚    git add -A                                               â”‚
â”‚    git commit -m "ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ"                                 â”‚
â”‚    git push origin main          (Ğ² modular-code-methodology)â”‚
â”‚    git push beta main            (Ğ² optioner-beta-deploy2)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Ğ”Ğ•ĞŸĞ›ĞĞ™ ĞĞ BETA Ğ¡Ğ•Ğ Ğ’Ğ•Ğ                                     â”‚
â”‚    ./scripts/deploy-beta.sh "ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ"                      â”‚
â”‚    - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿ÑƒÑˆĞ¸Ñ‚ Ğ² Ğ¾Ğ±Ğ° Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ                 â”‚
â”‚    - ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ´ Ğ½Ğ° 89.117.52.143:/var/www/beta          â”‚
â”‚    - ĞŸĞµÑ€ĞµÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ frontend (npm run build)                 â”‚
â”‚    - ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ nginx Ğ¸ PM2                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ ĞĞ BETA                                         â”‚
â”‚    https://beta.optioner.online                             â”‚
â”‚    - ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ĞºÑÑˆ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°: Ctrl+Shift+Delete              â”‚
â”‚    - Ğ˜Ğ»Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ Ğ¸Ğ½ĞºĞ¾Ğ³Ğ½Ğ¸Ñ‚Ğ¾                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°Ğ¿Ğ¾Ğº Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ

```
/var/www/beta/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ venv/
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ main.py
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ build/                    â† ĞŸĞ¾Ğ´Ğ°Ñ‘Ñ‚ÑÑ nginx
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”‚   â”œâ”€â”€ js/main.*.js      â† ĞšÑÑˆĞ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ½Ğ° 1 Ğ³Ğ¾Ğ´
â”‚   â”‚   â”‚   â””â”€â”€ css/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ node_modules/
â”œâ”€â”€ .git/
â”œâ”€â”€ docker-compose.yml (ĞµÑĞ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ)
â””â”€â”€ pm2-ecosystem.config.js (ĞµÑĞ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ)
```

## ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ

### Frontend
- **Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°**: `npm run build` â†’ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ `/var/www/beta/frontend/build`
- **ĞŸĞ¾Ğ´Ğ°Ñ‡Ğ°**: nginx Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ Ğ¸Ğ· `/var/www/beta/frontend/build`
- **ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**: 
  - HTML (index.html) â†’ ĞºÑÑˆĞ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ¾Ğ¼
  - JS/CSS â†’ ĞºÑÑˆĞ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ½Ğ° 1 Ğ³Ğ¾Ğ´ (expires 1y)

### Backend
- **Ğ—Ğ°Ğ¿ÑƒÑĞº**: PM2 ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ¼ Python
- **ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°**: `python -m uvicorn app.main:app --host 0.0.0.0 --port 8002`
- **ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°**: `pm2 restart all`

## ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹

### Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾
```bash
# Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²
npm start                          # Frontend Ğ½Ğ° localhost:3000
python -m uvicorn app.main:app    # Backend Ğ½Ğ° localhost:8000

# Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° beta
./scripts/deploy-beta.sh "ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ"

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°
git remote -v
git log --oneline -5
```

### ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ (Ñ‡ĞµÑ€ĞµĞ· SSH)
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
sshpass -p 'Z#yyJl7e34sptFij' ssh root@89.117.52.143 "ps aux | grep -E 'node|python|npm'"

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚
sshpass -p 'Z#yyJl7e34sptFij' ssh root@89.117.52.143 "cd /var/www/beta && git log --oneline -1"

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ, Ñ‡Ñ‚Ğ¾ build Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½
sshpass -p 'Z#yyJl7e34sptFij' ssh root@89.117.52.143 "ls -lah /var/www/beta/frontend/build/static/js/main.*.js"

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ PM2
sshpass -p 'Z#yyJl7e34sptFij' ssh root@89.117.52.143 "pm2 logs"
```

## ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¸ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

### Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ½Ğµ Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ½Ğ° beta.optioner.online
1. ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ĞºÑÑˆ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°: **Ctrl+Shift+Delete** â†’ "Ğ’ÑĞµ Ğ²Ñ€ĞµĞ¼Ñ"
2. ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ Ğ¸Ğ½ĞºĞ¾Ğ³Ğ½Ğ¸Ñ‚Ğ¾: **Ctrl+Shift+N**
3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ, Ñ‡Ñ‚Ğ¾ build Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ

### Git push Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ remotes
git remote -v

# Ğ•ÑĞ»Ğ¸ beta remote Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ
git remote add beta https://github.com/transatlanticsyndicate-code/optioner-beta-deploy2.git
```

### PM2 Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹ Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ÑÑ‚ÑÑ
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
sshpass -p 'Z#yyJl7e34sptFij' ssh root@89.117.52.143 "pm2 status"

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ
sshpass -p 'Z#yyJl7e34sptFij' ssh root@89.117.52.143 "pm2 restart all"
```

## ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ SSH

```
root@89.117.52.143
ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ: Z#yyJl7e34sptFij
```

âš ï¸ **ĞĞµ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ÑŒÑ‚Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ Ğ² git!** Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ:
```bash
export BETA_SSH_PASSWORD="Z#yyJl7e34sptFij"
```
