#!/bin/bash

# SSH ััะฝะฝะตะปั ะดะปั ะฟะพะดะบะปััะตะฝะธั ะบ PostgreSQL ะฝะฐ ัะตัะฒะตัะต
# ะัะฟะพะปัะทะพะฒะฐะฝะธะต: ./scripts/db-tunnel.sh

SERVER="root@89.117.52.143"
LOCAL_PORT=5432
REMOTE_PORT=5432

echo "๐ ะกะพะทะดะฐั SSH ััะฝะฝะตะปั ะบ PostgreSQL..."
echo "๐ ะกะตัะฒะตั: $SERVER"
echo "๐ ะะพะบะฐะปัะฝัะน ะฟะพัั: $LOCAL_PORT -> ะฃะดะฐะปะตะฝะฝัะน ะฟะพัั: $REMOTE_PORT"
echo ""
echo "โ ะขัะฝะฝะตะปั ะฐะบัะธะฒะตะฝ. PostgreSQL ะดะพัััะฟะตะฝ ะฝะฐ localhost:$LOCAL_PORT"
echo "โ๏ธ  ะะต ะทะฐะบััะฒะฐะน ััะพ ะพะบะฝะพ!"
echo ""
echo "ะะปั ะพััะฐะฝะพะฒะบะธ ะฝะฐะถะผะธ Ctrl+C"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"

# ะกะพะทะดะฐัั SSH ััะฝะฝะตะปั
# -N = ะฝะต ะฒัะฟะพะปะฝััั ะบะพะผะฐะฝะดั
# -L = ะปะพะบะฐะปัะฝัะน ัะพัะฒะฐัะดะธะฝะณ ะฟะพััะพะฒ
ssh -N -L ${LOCAL_PORT}:localhost:${REMOTE_PORT} ${SERVER}
