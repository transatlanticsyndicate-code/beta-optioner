# üîÑ –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ API CONTRACT

**–î–∞—Ç–∞:** 2025-01-09

---

## üéØ –ù–∞—à –ø–æ–¥—Ö–æ–¥: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å:**
- Backend –ø–∏—à–µ—Ç –ò–ò (Cascade)
- Frontend –ø–∏—à–µ—Ç –ò–ò (v0.app + Cascade)
- –í—ã —Å –ê–Ω–¥—Ä–µ–µ–º - –º–µ–Ω–µ–¥–∂–µ—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–∞

**–ü—Ä–æ—Ü–µ—Å—Å:** –°–Ω–∞—á–∞–ª–∞ backend ‚Üí –ø–æ—Ç–æ–º frontend ‚Üí –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É!

---

## ‚úÖ API Contract = –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫

**API Contract** = –∂–∏–≤–æ–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö API:
- –¢—ã –æ–ø–∏—Å—ã–≤–∞–µ—à—å —á—Ç–æ –µ—Å—Ç—å –≤ backend
- –ê–Ω–¥—Ä–µ–π —Å–º–æ—Ç—Ä–∏—Ç —á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ
- Cascade –ø–æ–¥–∫–ª—é—á–∞–µ—Ç API –∫ UI

**–§–∞–π–ª:** `_docs/teamwork/forAndrey/API_CONTRACT.md`

**–ó–∞—á–µ–º:**
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É
- ‚úÖ –ê–Ω–¥—Ä–µ–π –∑–Ω–∞–µ—Ç —á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ
- ‚úÖ Cascade –∑–Ω–∞–µ—Ç –∫—É–¥–∞ –ø–æ–¥–∫–ª—é—á–∞—Ç—å
- ‚úÖ –ù–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—ã

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã (–ø—Ä–∏–º–µ—Ä —Å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–º)

### –®–∞–≥ 1: –¢—ã –¥–µ–ª–∞–µ—à—å backend

```
–¢—ã ‚Üí Cascade: "–°–¥–µ–ª–∞–π backend –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –æ–ø—Ü–∏–æ–Ω–æ–≤"
```

**Cascade —Å–æ–∑–¥–∞–µ—Ç:**
- Endpoint `/api/calculate`
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç: `{ ticker, strike, expiry }`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `{ max_pain, put_call_ratio, iv_rank }`

### –®–∞–≥ 2: –¢—ã –æ–±–Ω–æ–≤–ª—è–µ—à—å API Contract

```
–¢—ã ‚Üí Cascade: "–û–±–Ω–æ–≤–∏ API_CONTRACT.md - –¥–æ–±–∞–≤—å /api/calculate —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤"
```

**Cascade –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ `API_CONTRACT.md`:**

```markdown
### POST /api/calculate

–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ–ø—Ü–∏–æ–Ω–æ–≤

**Request:**
```json
{
  "ticker": "SPY",
  "strike": 450,
  "expiry": "2025-02-21"
}
```

**Response:**
```json
{
  "status": "success",
  "result": {
    "max_pain": 450.0,
    "put_call_ratio": 1.23,
    "iv_rank": 45.6
  }
}
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X POST http://test.optioner.online/api/calculate \
  -H "Content-Type: application/json" \
  -d '{"ticker": "SPY", "strike": 450, "expiry": "2025-02-21"}'
```
```

### –®–∞–≥ 3: –¢—ã –¥–µ–ø–ª–æ–∏—à—å –Ω–∞ —Ç–µ—Å—Ç

```
–ö–æ–º–∞–Ω–¥–∞: /levon-test
```

Backend —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `test.optioner.online`

### –®–∞–≥ 4: –¢—ã –ø–∏—à–µ—à—å –ê–Ω–¥—Ä–µ—é

```
"–ê–Ω–¥—Ä–µ–π, backend –≥–æ—Ç–æ–≤!

Endpoint: /api/calculate
–°–º–æ—Ç—Ä–∏ API_CONTRACT.md - —Ç–∞–º –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

–ú–æ–∂–µ—à—å –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫ UI"
```

### –®–∞–≥ 5: –ê–Ω–¥—Ä–µ–π —Å–∫–∞—á–∏–≤–∞–µ—Ç –∫–æ–¥ –∏–∑ v0.app

```
–ê–Ω–¥—Ä–µ–π: /andrey-pull-v0
–£–∫–∞–∑—ã–≤–∞–µ—Ç: v0/calculator-ui
```

–ö–æ–¥ –∏–∑ v0.app —Ç–µ–ø–µ—Ä—å –≤ Windsurf

### –®–∞–≥ 6: –ê–Ω–¥—Ä–µ–π –ø–æ–¥–∫–ª—é—á–∞–µ—Ç API

```
–ê–Ω–¥—Ä–µ–π ‚Üí Cascade: "–ü–æ–¥–∫–ª—é—á–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫ /api/calculate
–°–º–æ—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏ 45-67 –≤ Calculator.jsx
–ò—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º–∞—Ç –∏–∑ API_CONTRACT.md"
```

**Cascade –ø–æ–¥–∫–ª—é—á–∞–µ—Ç:**
```jsx
// frontend/src/components/Calculator.jsx

const calculate = async (ticker, strike, expiry) => {
  const response = await fetch('/api/calculate', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ ticker, strike, expiry })
  });
  const data = await response.json();
  setResult(data.result);
};
```

### –®–∞–≥ 7: –ê–Ω–¥—Ä–µ–π —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ

```
–ê–Ω–¥—Ä–µ–π: /local-start
```

- Backend: `http://localhost:8000`
- Frontend: `http://localhost:3000`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç

### –®–∞–≥ 8: –ê–Ω–¥—Ä–µ–π –¥–µ–ø–ª–æ–∏—Ç –Ω–∞ —Ç–µ—Å—Ç

```
–ê–Ω–¥—Ä–µ–π: /andrey-test
–°–æ–æ–±—â–µ–Ω–∏–µ: "feat(ui): –ø–æ–¥–∫–ª—é—á–∏–ª –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫ API"
```

### –®–∞–≥ 9: –ê–Ω–¥—Ä–µ–π —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –Ω–∞ test-—Å–µ—Ä–≤–µ—Ä–µ

- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç `https://test.optioner.online`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–∫–µ—Ä–∞–º–∏

### –®–∞–≥ 10: –ê–Ω–¥—Ä–µ–π —Å–æ–∑–¥–∞–µ—Ç PR

- –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
- –°–æ–∑–¥–∞–µ—Ç Pull Request
- –¢—ã –º–µ—Ä–∂–∏—à—å ‚Üí –¥–µ–ø–ª–æ–∏—à—å –Ω–∞ production

**–ì–æ—Ç–æ–≤–æ!** –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ production.

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

**–°–Ω–∞—á–∞–ª–∞ backend:**
- –¢—ã –¥–µ–ª–∞–µ—à—å backend
- –î–µ–ø–ª–æ–∏—à—å –Ω–∞ test
- –û–±–Ω–æ–≤–ª—è–µ—à—å API_CONTRACT.md

**–ü–æ—Ç–æ–º frontend:**
- –ê–Ω–¥—Ä–µ–π —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑ v0.app
- Cascade –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –∫ –≥–æ—Ç–æ–≤–æ–º—É API
- –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É!

### 2. API Contract = –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫

```
_docs/teamwork/forAndrey/API_CONTRACT.md
```

**–ß—Ç–æ —Ç–∞–º:**
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö endpoints
- –§–æ—Ä–º–∞—Ç request/response
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–ó–∞—á–µ–º:**
- –ê–Ω–¥—Ä–µ–π –∑–Ω–∞–µ—Ç —á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ
- Cascade –∑–Ω–∞–µ—Ç –∫—É–¥–∞ –ø–æ–¥–∫–ª—é—á–∞—Ç—å
- –ù–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—ã

### 3. –ö–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å

**–¢—ã –≥–æ–≤–æ—Ä–∏—à—å Cascade –æ–±–Ω–æ–≤–∏—Ç—å API_CONTRACT.md –∫–æ–≥–¥–∞:**
- –î–æ–±–∞–≤–ª—è–µ—à—å –Ω–æ–≤—ã–π endpoint
- –ú–µ–Ω—è–µ—à—å —Ñ–æ—Ä–º–∞—Ç request/response
- –î–æ–±–∞–≤–ª—è–µ—à—å –Ω–æ–≤—ã–µ –ø–æ–ª—è

**–ö–∞–∫:**
```
–¢—ã ‚Üí Cascade: "–û–±–Ω–æ–≤–∏ API_CONTRACT.md:
- –î–æ–±–∞–≤—å endpoint /api/history —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- –û–±–Ω–æ–≤–∏ /api/calculate - —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ—â–µ –∏ timestamp"
```

**–ü–æ—Ç–æ–º –ø–∏—à–∏ –ê–Ω–¥—Ä–µ—é:**
```
"–ê–Ω–¥—Ä–µ–π, –æ–±–Ω–æ–≤–∏–ª API_CONTRACT.md:
- –î–æ–±–∞–≤–∏–ª endpoint /api/history
- –ò–∑–º–µ–Ω–∏–ª —Ñ–æ—Ä–º–∞—Ç /api/calculate (—Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ—â–µ –∏ timestamp)"
```

### 4. –ù–µ—Ç mock –¥–∞–Ω–Ω—ã—Ö!

**–ü—Ä–æ—Å—Ç–æ—Ç–∞:**
- Backend –≥–æ—Ç–æ–≤ ‚Üí –¥–µ–ø–ª–æ–π ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ê–Ω–¥—Ä–µ–π –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –∫ –≥–æ—Ç–æ–≤–æ–º—É API
- –ù–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π mock ‚Üí real
- –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É!

---

## üìã –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

### –î–µ–Ω—å 1: –¢—ã –¥–µ–ª–∞–µ—à—å backend

```
1. –¢—ã ‚Üí Cascade: "–°–¥–µ–ª–∞–π backend –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞"
2. Cascade: –°–æ–∑–¥–∞–µ—Ç /api/calculate
3. –¢—ã: /levon-test (–∫–æ–º–∞–Ω–¥–∞ –Ω–∞–ø–æ–º–Ω–∏—Ç –æ–±–Ω–æ–≤–∏—Ç—å API_CONTRACT.md)
4. –¢—ã ‚Üí Cascade: "–û–±–Ω–æ–≤–∏ API_CONTRACT.md - –¥–æ–±–∞–≤—å /api/calculate"
5. Cascade: –û–±–Ω–æ–≤–ª—è–µ—Ç API_CONTRACT.md
6. –¢—ã: /levon-test (–¥–µ–ø–ª–æ–π –Ω–∞ test)
7. –¢—ã ‚Üí –ê–Ω–¥—Ä–µ—é: "Backend –≥–æ—Ç–æ–≤, —Å–º–æ—Ç—Ä–∏ API_CONTRACT.md"
```

**–ö–æ–º–∞–Ω–¥–∞ `/levon-test` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å API_CONTRACT.md!**

### –î–µ–Ω—å 2: –ê–Ω–¥—Ä–µ–π –¥–µ–ª–∞–µ—Ç frontend

```
1. –ê–Ω–¥—Ä–µ–π: /andrey-pull-v0 (—Å–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑ v0.app)
2. –ê–Ω–¥—Ä–µ–π ‚Üí Cascade: "–ü–æ–¥–∫–ª—é—á–∏ –∫ /api/calculate"
3. Cascade: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç API
4. –ê–Ω–¥—Ä–µ–π: /local-start (—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ)
5. –ê–Ω–¥—Ä–µ–π: /andrey-test (–¥–µ–ø–ª–æ–π –Ω–∞ test)
6. –ê–Ω–¥—Ä–µ–π: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –Ω–∞ test.optioner.online
7. –ê–Ω–¥—Ä–µ–π: –°–æ–∑–¥–∞–µ—Ç PR
```

### –î–µ–Ω—å 3: Production

```
1. –¢—ã: –ú–µ—Ä–∂–∏—à—å PR
2. –¢—ã: /levon-deploy-prod
3. –ì–æ—Ç–æ–≤–æ! –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ production
```

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

**–ü—Ä–æ—Å—Ç–æ—Ç–∞:**
- ‚úÖ –ù–µ—Ç mock –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ù–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

**–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å:**
- ‚úÖ API Contract = —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
- ‚úÖ –ê–Ω–¥—Ä–µ–π –∑–Ω–∞–µ—Ç —á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ
- ‚úÖ Cascade –∑–Ω–∞–µ—Ç –∫—É–¥–∞ –ø–æ–¥–∫–ª—é—á–∞—Ç—å
- ‚úÖ –ù–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—ã

**–°–∫–æ—Ä–æ—Å—Ç—å:**
- ‚úÖ Backend –≥–æ—Ç–æ–≤ ‚Üí –¥–µ–ø–ª–æ–π
- ‚úÖ Frontend –ø–æ–¥–∫–ª—é—á–∞–µ—Ç ‚Üí –¥–µ–ø–ª–æ–π
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí production
- ‚úÖ 2-3 –¥–Ω—è –æ—Ç –∏–¥–µ–∏ –¥–æ production

---

## üéØ –ò—Ç–æ–≥–æ

**API Contract** = –∂–∏–≤–æ–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤ `_docs/teamwork/forAndrey/API_CONTRACT.md`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –¢—ã ‚Üí Cascade: –¥–µ–ª–∞–µ—Ç backend
2. –¢—ã ‚Üí Cascade: –æ–±–Ω–æ–≤–ª—è–µ—Ç API_CONTRACT.md
3. –¢—ã: –¥–µ–ø–ª–æ–π –Ω–∞ test
4. –¢—ã ‚Üí –ê–Ω–¥—Ä–µ—é: "Backend –≥–æ—Ç–æ–≤, —Å–º–æ—Ç—Ä–∏ Contract"
5. –ê–Ω–¥—Ä–µ–π ‚Üí Cascade: –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –∫ API
6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí PR ‚Üí production

**–ì–ª–∞–≤–Ω–æ–µ:** 
- ‚úÖ Cascade –¥–µ–ª–∞–µ—Ç –≤—Å—é —Ä–∞–±–æ—Ç—É (backend + –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è + –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
- ‚úÖ –í—ã —Å –ê–Ω–¥—Ä–µ–µ–º - –º–µ–Ω–µ–¥–∂–µ—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ –ü—Ä–æ—Å—Ç–æ, –ø–æ–Ω—è—Ç–Ω–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É!

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-01-09
